{"version":3,"sources":["webpack:///./src/services/auth-header.js","webpack:///./src/services/user.service.js","webpack:///./src/components/Profile.vue","webpack:///./src/components/Profile.vue?af79"],"names":["authHeader","user","JSON","parse","localStorage","getItem","accessToken","Authorization","API_URL","UserService","idUser","text","axios","post","headers","get","idTodo","delete","put","title","idEntry","class","currentUser","username","userActivityEntry","userActivityTodo","name","data","computed","this","$store","state","auth","mounted","$router","push","getActivity","id","then","response","todosCompletedCount","entriesCount","error","console","log","message","toString","render"],"mappings":"mKAAe,SAASA,IACtB,IAAIC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,SAC3C,OAAIJ,GAAQA,EAAKK,YACR,CAAEC,cAAe,UAAYN,EAAKK,aAElC,GCFX,IAAME,EAAU,kCAEVC,E,6FACJ,SAAQC,EAAOC,GACb,OAAOC,IAAMC,KAAKL,EAAUE,EAAO,SAAU,CAACC,KAAKA,EAAMG,QAASd,Q,sBAGpE,SAASU,GACP,OAAOE,IAAMG,IAAIP,EAAUE,EAAO,SAAU,CAAEI,QAASd,Q,wBAEzD,SAAWU,EAAQM,GACjB,OAAOJ,IAAMK,OAAOT,EAAUE,EAAO,UAAUM,EAAQ,CAAEF,QAASd,Q,wBAEpE,SAAWU,EAAQM,GACjB,OAAOJ,IAAMM,IAAIV,EAAUE,EAAO,UAAUM,EAAO,UAAW,CAAEF,QAASd,Q,sBAK3E,SAASU,EAAOS,EAAMR,GACpB,OAAOC,IAAMC,KAAKL,EAAUE,EAAO,WAAY,CAACS,MAAMA,EAAMR,KAAKA,EAAMG,QAASd,Q,wBAElF,SAAWU,GACT,OAAOE,IAAMG,IAAIP,EAAUE,EAAO,WAAY,CAAEI,QAASd,Q,yBAE3D,SAAYU,EAAQU,GAClB,OAAOR,IAAMK,OAAOT,EAAUE,EAAO,YAAYU,EAAS,CAAEN,QAASd,Q,uBAEvE,SAAUU,EAAQU,EAAQD,EAAMR,GAC9B,OAAOC,IAAMM,IAAIV,EAAUE,EAAO,YAAYU,EAAS,CAACD,MAAMA,EAAMR,KAAKA,EAAMG,QAASd,Q,yBAI1F,SAAYU,GACV,OAAOE,IAAMG,IAAIP,EAAUE,EAAO,YAAa,CAAEI,QAASd,Q,yBAI5D,SAAYU,EAAOS,EAAMR,GACvB,OAAOC,IAAMC,KAAKL,EAAUE,EAAO,aAAc,CAACS,MAAMA,EAAMR,KAAKA,EAAOG,QAASd,Q,0BAIrF,SAAaU,GACX,OAAOE,IAAMG,IAAI,mCAAqCL,EAAO,aAAc,CAAEI,QAASd,U,KAK3E,WAAIS,G,8DCnDZY,MAAM,kB,GACFA,MAAM,e,GAGRA,MAAM,a,EACR,eAAiC,WAA5B,0BAAsB,G,GACzBA,MAAM,gB,GACNA,MAAM,gB,gDAPb,eA0BM,MA1BN,EA0BM,CAzBF,eAEM,MAFN,EAAyB,yBACF,eAAE,EAAAC,YAAYC,UAAQ,GAE/C,eAIM,MAJN,EAIM,CAHH,EACD,eAAuE,IAAvE,EAAwB,WAAQ,eAAE,EAAAC,mBAAmB,iBAAc,GACnE,eAA6E,IAA7E,EAAwB,aAAU,eAAE,EAAAC,kBAAkB,sBAAmB,O,oCAwBhE,GACbC,KAAM,UACNC,KAFa,WAGX,MAAO,CACLF,iBAAiB,EACjBD,kBAAkB,IAItBI,SAAU,CACRN,YADQ,WAEN,OAAOO,KAAKC,OAAOC,MAAMC,KAAK/B,OAGlCgC,QAda,WAcH,WACHJ,KAAKP,aACRO,KAAKK,QAAQC,KAAK,UAEpB,OAAYC,YAAYP,KAAKC,OAAOC,MAAMC,KAAK/B,KAAKoC,IAAIC,MACpD,SAACC,GACC,EAAKd,iBAAmBc,EAASZ,KAAKa,oBACtC,EAAKhB,kBAAoBe,EAASZ,KAAKc,gBAEzC,SAACC,GACCC,QAAQC,IAAKF,EAAMH,UACfG,EAAMH,SAASZ,MACfe,EAAMH,SAASZ,KAAKkB,SACpBH,EAAMG,SACNH,EAAMI,iBCzDpB,EAAOC,OAASA,EAED","file":"js/chunk-f7c71300.47a0940e.js","sourcesContent":["export default function authHeader() {\n  let user = JSON.parse(localStorage.getItem('user'));\n  if (user && user.accessToken) {\n    return { Authorization: 'Bearer ' + user.accessToken };\n  } else {\n    return {};\n  }\n}\n","import axios from 'axios';\nimport authHeader from './auth-header';\n\nconst API_URL = 'http://localhost:8089/api/user/';\n\nclass UserService {\n  addTodo(idUser,text) {\n    return axios.post(API_URL + idUser+'/todos', {text:text ,headers: authHeader() });\n  }\n  //Todos\n  getTodos(idUser) {\n    return axios.get(API_URL + idUser+'/todos', { headers: authHeader() });\n  }\n  removeTodo(idUser, idTodo) {\n    return axios.delete(API_URL + idUser+'/todos/'+idTodo, { headers: authHeader() });\n  }\n  toggleTodo(idUser, idTodo) {\n    return axios.put(API_URL + idUser+'/todos/'+idTodo+'/toggle', { headers: authHeader() });\n  }\n\n  //Entries\n\n  addEntry(idUser,title,text) {\n    return axios.post(API_URL + idUser+'/entries', {title:title,text:text ,headers: authHeader() });\n  }\n  getEntries(idUser){\n    return axios.get(API_URL + idUser+'/entries', { headers: authHeader() });\n  }\n  removeEntry(idUser, idEntry) {\n    return axios.delete(API_URL + idUser+'/entries/'+idEntry, { headers: authHeader() });\n  }\n  editEntry(idUser, idEntry,title,text) {\n    return axios.put(API_URL + idUser+'/entries/'+idEntry, {title:title,text:text, headers: authHeader() });\n  }\n\n  //UserActivity\n  getActivity(idUser){\n    return axios.get(API_URL + idUser+'/activity', { headers: authHeader() })\n  }\n\n  //CallBack\n  addCallback(idUser,title,text){\n    return axios.post(API_URL + idUser+'/callbacks', {title:title,text:text,  headers: authHeader() })\n  }\n\n  //Admin\n  getCallbacks(idUser) {\n    return axios.get('http://localhost:8089/api/admin/' + idUser+'/callbacks', { headers: authHeader() });\n  }\n\n}\n\nexport default new UserService();\n","<template>\n  <div class=\"container card\">\n      <div class=\"card-header\">\n        Профиль пользователя {{currentUser.username}}\n      </div>\n    <div class=\"card-body\">\n       <div>За последнюю неделю Вы</div>\n      <p class=\"text-success\">Создали {{userActivityEntry}} новые заметки</p>\n      <p class=\"text-success\">Выполнили {{userActivityTodo}} поставленных задач</p>\n    </div>\n<!--    <p>-->\n<!--   Token:-->\n<!--      {{currentUser.accessToken}}-->\n<!--    </p>-->\n<!--    <p>-->\n<!--      <strong>Id:</strong>-->\n<!--      {{currentUser.id}}-->\n<!--    </p>-->\n<!--    <p>-->\n<!--      <strong>Email:</strong>-->\n<!--      {{currentUser.email}}-->\n<!--    </p>-->\n<!--    <strong>Роли:</strong>-->\n<!--    <ul>-->\n<!--      <li v-for=\"role in currentUser.roles\" :key=\"role\">{{role}}</li>-->\n<!--    </ul>-->\n\n  </div>\n</template>\n\n<script>\nimport UserService from \"../services/user.service\";\nexport default {\n  name: 'Profile',\n  data() {\n    return {\n      userActivityTodo:0,\n      userActivityEntry:0,\n    };\n  },\n\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    }\n  },\n  mounted() {\n    if (!this.currentUser) {\n      this.$router.push('/login');\n    }\n    UserService.getActivity(this.$store.state.auth.user.id).then(\n        (response) => {\n          this.userActivityTodo = response.data.todosCompletedCount;\n          this.userActivityEntry = response.data.entriesCount;\n        },\n        (error) => {\n          console.log((error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n              error.message ||\n              error.toString());\n        })\n  }\n};\n</script>","import { render } from \"./Profile.vue?vue&type=template&id=412759d4\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}